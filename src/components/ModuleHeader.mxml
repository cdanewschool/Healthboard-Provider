<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer 
	xmlns:fx="http://ns.adobe.com/mxml/2009" 
	xmlns:s="library://ns.adobe.com/flex/spark" 
	xmlns:mx="library://ns.adobe.com/flex/mx" height="40" width="100%">
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import events.ApplicationEvent;
			
			[Bindable] public var title:String;
			[Bindable] public var icon:Class;
			
			[Bindable] public var showSearch:Boolean;
			[Bindable] public var searchPlaceholder:String;
			[Bindable] public var searchFunction:Function;
			
			private function onHeaderClick(event:MouseEvent):void
			{
				var evt:ApplicationEvent = new ApplicationEvent( ApplicationEvent.NAVIGATE, true );
				evt.data = 0;
				dispatchEvent( evt );
			}
			
			public function get searchText():String
			{
				return search.text;
			}
		]]>
	</fx:Script>
	
	<s:layout>
		<s:HorizontalLayout verticalAlign="middle" paddingLeft="16" />
	</s:layout>
	
	<s:backgroundFill>
		<s:LinearGradient rotation="270">
			<s:GradientEntry color="0xA3A3A3" alpha="1" ratio=".38" />
			<s:GradientEntry color="0x706F6F" alpha="1" ratio="1" />
		</s:LinearGradient>
	</s:backgroundFill>
	
	<s:Image source="{icon}" buttonMode="true" click="onHeaderClick(event)" />
	<s:Label id="lblBreadcrumbPatient" text="{title}" color="0xFFFFFF" fontSize="22" fontWeight="bold" paddingTop="2" paddingLeft="3" />
	<s:Label text="â–¼" fontSize="10" color="0xFFFFFF" paddingTop="4" paddingLeft="12" />
	
	<s:Spacer width="100%" />

	<s:HGroup gap="-1" paddingRight="38" visible="{showSearch}" includeInLayout="{showSearch}">
		<s:TextInput id="search" text="{searchPlaceholder}" fontSize="10" fontStyle="italic" color="0x999999" height="24" width="166" paddingTop="5" click="{if(search.text == searchPlaceholder) search.text=''}" change="{searchFunction()}" />
		<s:Button styleName="searchButtonIcon" width="24" height="24" />
	</s:HGroup>
	
</s:BorderContainer>
