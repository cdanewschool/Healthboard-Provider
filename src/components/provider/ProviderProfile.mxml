<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow 
	xmlns:fx="http://ns.adobe.com/mxml/2009" 
	 xmlns:s="library://ns.adobe.com/flex/spark" 
	 xmlns:mx="library://ns.adobe.com/flex/mx" 
	 width="{WIDTH}" height="156" 
	 backgroundColor="0x3C3C3B" cornerRadius="5" 
	 borderColor="0xBDBCBC"
	 skinClass="external.skins.TitleWindowSkin" styleName="teamProfileTitle" 
	 controlBarVisible="true" 
	 creationComplete="init()" 
	 rollOver="onRollOver(event)" 
	 rollOut="onRollOut(event)" 
	 click="onClick(event)">
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Metadata>
		[Event(name="select", type="flash.events")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import events.ApplicationEvent;
			import events.ProviderEvent;
			
			import models.ProviderModel;
			
			public static const WIDTH:int = 314;
			
			[Bindable] public var provider:ProviderModel;
			
			private function onSelect(event:MouseEvent):void
			{
				dispatchEvent( new ProviderEvent(ProviderEvent.SELECT, false, false, ProviderModel(provider) ) );
			}
			
			private function onRollOver(event:MouseEvent):void
			{
				//setStyle("backgroundColor", "0x00ADEE");
				//setStyle("backgroundAlpha", .2);
				setStyle("backgroundColor", "0x31535E");
			}
			
			private function onRollOut(event:MouseEvent):void
			{
				setStyle("backgroundColor", "0x3C3C3B");
				//setStyle("backgroundAlpha", 1);
			}
			
			private function onClick(event:MouseEvent):void
			{
				dispatchEvent( new ProviderEvent(ProviderEvent.SELECT, false, false, ProviderModel(provider) ) );
			}
			
			private function onTargetUserImageLoadError(event:IOErrorEvent):void
			{
				Image(event.currentTarget).source = provider.getDefaultProfilePictureURL( 'small' );
			}
			
			private function init():void
			{
				profilePic.source = provider.getProfilePictureURL();
				
				controlBarVisible=false;
			}
		]]>
	</fx:Script>
	
	<s:controlBarContent />
	
	<s:HGroup width="100%" gap="10" paddingLeft="7" paddingTop="7">
		
		<s:VGroup paddingTop="0">
			<s:BorderContainer borderColor="0xE6E6E6" borderWeight="1" width="60" height="75"> 
				<s:Image id="profilePic" ioError="onTargetUserImageLoadError(event)" />
			</s:BorderContainer>
		</s:VGroup>
		
		<s:VGroup paddingTop="-6" fontWeight="normal" gap="3">
			<mx:LinkButton id="btnProviderName" label="{(provider.role == 'MD' ? 'Dr. ' : '') + provider.firstName + ' ' + provider.lastName}" fontSize="14" fontWeight="bold" paddingLeft="0" color="0xAEDEE4" textRollOverColor="0xAEDEE4" textSelectedColor="0xAEDEE4" skin="{null}" rollOver="{btnProviderName.styleName='linkBtnUnderline';}" rollOut="btnProviderName.styleName='linkBtn';" click="onSelect(event)" />
			<s:HGroup>
				<s:Label text="Specialty:" textAlign="right" fontSize="12" width="51" />
				<s:Label text="{provider.specialty}" fontSize="12"/>
			</s:HGroup>
			<s:HGroup>
				<s:Label text="Board:" textAlign="right" fontSize="12" width="51" />
				<s:Label text="{provider.status}" fontSize="12"/>
			</s:HGroup>
			<s:HGroup>
				<s:Label text="Title:" textAlign="right" fontSize="12" width="51" />
				<s:Label text="{provider.role}" fontSize="12"/>
			</s:HGroup>
			<s:HGroup>
				<s:Label text="Team:" textAlign="right" fontSize="12" width="51" />
				<s:Label text="{provider.team}" fontSize="12"/>
			</s:HGroup>
		</s:VGroup>
	</s:HGroup>
	
</s:TitleWindow>
