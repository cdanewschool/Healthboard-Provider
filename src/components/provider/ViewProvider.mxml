<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
					xmlns:s="library://ns.adobe.com/flex/spark" 
					xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%" creationComplete="init()">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import models.ProviderModel;
			import ASfiles.ProviderConstants;
			
			import events.ProviderEvent;
			
			import mx.events.CloseEvent;
			import mx.managers.PopUpManager;
			
			[Bindable] public var provider:ProviderModel;
			
			private var editWindow:EditProvider;
			
			private function editProfile(event:MouseEvent):void
			{
				closePopup();
				
				editWindow = new EditProvider();
				editWindow.provider = provider.clone();
				editWindow.addEventListener( ProviderEvent.SAVE, onSave );
				
				PopUpManager.addPopUp(editWindow, this, true);
				PopUpManager.centerPopUp(editWindow);
			}
			
			private function onSave( event:ProviderEvent ):void
			{
				provider.copy( event.provider );
				
				closePopup();
			}
			
			private function closePopup():void
			{
				if( editWindow )
				{
					PopUpManager.removePopUp( editWindow );
					editWindow = null;
				}
			}
			
			private function init():void
			{
				label = provider.fullName;
				profilePic.source = provider.getProfilePictureURL();
			}
			
		]]>
	</fx:Script>
	
	<s:layout>
		<s:VerticalLayout paddingTop="15" paddingLeft="10" paddingRight="10" gap="20"/>
	</s:layout>
	
	<!--	basic	-->
	<s:HGroup width="100%" gap="10">
		
		<s:VGroup paddingTop="10">
			<s:BorderContainer borderColor="0xBBBDBF" borderWeight="1" width="60" height="75"> 
				<mx:Image id="profilePic" />
			</s:BorderContainer>
		</s:VGroup>
		
		<s:VGroup paddingLeft="40">
			<s:Label text="{provider.fullName}" styleName="blueBoldSubtitle" />
			<s:HGroup>
				<s:Label text="DOB:" textAlign="right" width="150" styleName="whiteText13" />
				<s:Label text="{provider.birthday}" styleName="whiteText13"/>
			</s:HGroup>
			<s:HGroup>
				<s:Label text="Age:" textAlign="right" width="150" styleName="whiteText13" />
				<s:Label text="{provider.age}" styleName="whiteText13"/>
			</s:HGroup>
			<s:HGroup>
				<s:Label text="Sex:" textAlign="right" width="150" styleName="whiteText13"/>
				<s:Label text="{provider.sex}" styleName="whiteText13"/>
			</s:HGroup>
		</s:VGroup>
	</s:HGroup>
	
	<s:Line xFrom="20" xTo="{width-10}">
		<s:stroke>
			<s:SolidColorStroke color="0x676767" weight="1" />
		</s:stroke>
	</s:Line>
	
	<!--	information	-->
	<s:VGroup width="100%" gap="10" paddingLeft="150">
		
		<s:Label text="Role and Office Information" styleName="greenSubtitle" paddingLeft="160"/>
		
		<s:HGroup>
			<s:Label text="Position:" textAlign="right" width="150" styleName="whiteText13"/>
			<s:Label text="{provider.role}" styleName="whiteText13"/>
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Current Team:" textAlign="right" width="150" styleName="whiteText13"/>
			<s:Label text="{provider.team}" styleName="whiteText13" />
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Location:" textAlign="right" width="150" styleName="whiteText13"/>
			<s:Label text="{provider.location}" styleName="whiteText13"/>
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Office:" textAlign="right" width="150" styleName="whiteText13"/>
			<s:Label text="{provider.office}" styleName="whiteText13" />
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Office Phone:" textAlign="right" width="150" styleName="whiteText13" />
			<s:Label text="{provider.phone}" styleName="whiteText13" />
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Email address:" textAlign="right" width="150" styleName="whiteText13"/>
			<mx:LinkButton label="{provider.email}" styleName="linkBtnBlue" fontSize="13" />
		</s:HGroup>
		
	</s:VGroup>
	
	<s:Line xFrom="0" xTo="{width}">
		<s:stroke>
			<s:SolidColorStroke color="0x676767" weight="1" />
		</s:stroke>
	</s:Line>
	
	<!--	experience	-->
	<s:VGroup width="100%" gap="10" paddingLeft="150">
		
		<s:Label text="Education and Experience" styleName="greenSubtitle" paddingLeft="160" />
		
		<s:HGroup>
			<s:Label text="Education:" textAlign="right" width="150" styleName="whiteText13"/>
			<s:Label text="{provider.education}" styleName="whiteText13" />
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Board Certification:" textAlign="right" width="150" styleName="whiteText13" />
			<s:Label text="{provider.certification}" styleName="whiteText13" />
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Speicialty:" textAlign="right" width="150" styleName="whiteText13" />
			<s:Label text="{provider.specialty}" styleName="whiteText13" />
		</s:HGroup>
		
	</s:VGroup>
	
	<s:Line xFrom="0" xTo="{width}">
		<s:stroke>
			<s:SolidColorStroke color="0x676767" weight="1" />
		</s:stroke>
	</s:Line>
	
	<!--	address	-->
	<s:VGroup width="100%" gap="10" paddingLeft="150">
		
		<s:Label text="Address and Emergency Contact"  color="0x999999"  paddingLeft="150" fontSize="12" fontWeight="bold" />
		<s:Label text="Only viewable by admin" fontStyle="italic" color="0x999999" paddingLeft="150" fontSize="14" />
		
	</s:VGroup>
	
	<s:Line xFrom="0" xTo="{width}">
		<s:stroke>
			<s:SolidColorStroke color="0x676767" weight="1" />
		</s:stroke>
	</s:Line>
	
	<s:Group textAlign="center" width="100%">
		<s:layout>
			<s:BasicLayout />
		</s:layout>
		<s:Button label="Edit" click="editProfile(event)" horizontalCenter="0" visible="{provider.id == ProviderConstants.USER_ID}" />
	</s:Group>
	
</s:NavigatorContent>
